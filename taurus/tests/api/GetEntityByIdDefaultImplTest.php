<?php
/**
 * Created by PhpStorm.
 * User: michaelhunger
 * Date: 20/02/17
 * Time: 22:36
 */

namespace taurus\tests\api;


use fitnessmanager\exercise\Exercise;
use fitnessmanager\exercise\ExerciseGroup;
use taurus\framework\api\GetEntityByIdDefaultServiceImpl;
use taurus\framework\config\TaurusContainerConfig;
use taurus\framework\Container;
use taurus\tests\AbstractDatabaseTest;

class GetEntityByIdDefaultImplTest extends AbstractDatabaseTest
{
    /** @var GetEntityByIdDefaultServiceImpl */
    private $getEntityByIdService;

    public function setUp()
    {
        $this->getEntityByIdService = Container::getInstance()->getService(TaurusContainerConfig::SERVICE_DEFAULT_GETBYID_SERVICE);
        $this->getEntityByIdService->setEntityClass(Exercise::class);

        parent::setUp(); // TODO: Change the autogenerated stub
    }

    /**
     * @return array
     */
    function getFixtureFiles(): array
    {
        return [
            'workout_location.xml',
            'muscle_group.xml',
            'exercise_group.xml',
            'exercise.xml'
        ];
    }

    public function testGetEntityByIdDefaultServiceTest()
    {
        $actualResult = $this->getEntityByIdService->getEntityById(3);
        $expectedResult = Container::getInstance()->getService(TaurusContainerConfig::SERVICE_BASE_REPOSITORY)->findOne(3, Exercise::class);

        $this->assertEquals(
            $expectedResult,
            $actualResult,
            'The two entities are not the same'
        );
    }
}